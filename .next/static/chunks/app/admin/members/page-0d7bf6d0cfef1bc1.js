(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8091:function(e,t,n){Promise.resolve().then(n.bind(n,4879))},4879:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(7437),a=n(2265),r=n(9376),l=n(7648),i=n(9203);function c(){let e=(0,r.useRouter)(),[t,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0);async function o(){let{data:{user:t}}=await i.O.auth.getUser();if(!t){e.push("/debug-login");return}let{data:n}=await i.O.from("profiles").select("role").eq("id",t.id).single();(null==n?void 0:n.role)&&["admin","mod_member"].includes(n.role)||e.push("/")}async function x(){d(!0);try{let{data:e,error:t}=await i.O.from("profiles").select("id, full_name, email, role, is_active, join_date").order("join_date",{ascending:!1});if(t){console.error("Error:",t);return}n(e||[])}catch(e){console.error("Error:",e)}finally{d(!1)}}(0,a.useEffect)(()=>{o(),x()},[]);let h=e=>({admin:"Super Admin",mod_finance:"Mod T\xe0i Ch\xednh",mod_challenge:"Mod Thử Th\xe1ch",mod_member:"Mod Th\xe0nh Vi\xean",member:"Th\xe0nh Vi\xean"})[e]||e;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-6 px-4",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\uD83D\uDC65 Th\xeam/Sửa Th\xe0nh Vi\xean"}),(0,s.jsx)(l.default,{href:"/admin",className:"text-blue-100 hover:text-white",children:"← Quay lại"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:c?(0,s.jsx)("div",{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Đang tải..."})}):t.length>0?(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"T\xean"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"Email"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"Vai Tr\xf2"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"Gia Nhập"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 font-bold text-gray-700",children:"Trạng Th\xe1i"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 font-bold text-gray-700",children:"H\xe0nh Động"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.full_name}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold ".concat(e.role.includes("admin")?"bg-red-100 text-red-800":e.role.includes("mod")?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:h(e.role)})}),(0,s.jsx)("td",{className:"py-3 px-4",children:new Date(e.join_date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,s.jsx)("td",{className:"py-3 px-4 text-center",children:e.is_active?(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"✓ Hoạt động"}):(0,s.jsx)("span",{className:"text-red-600 font-semibold",children:"✕ Kh\xf4ng hoạt động"})}),(0,s.jsx)("td",{className:"py-3 px-4 text-center",children:(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Sửa"})})]},e.id))})]}):(0,s.jsx)("div",{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng c\xf3 th\xe0nh vi\xean n\xe0o"})})}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-4",children:["\uD83D\uDCA1 Tổng cộng: ",(0,s.jsx)("span",{className:"font-bold",children:t.length})," th\xe0nh vi\xean"]})]})]})}},9203:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var s=n(7421);let a="https://jvnpxcwjfidrlqlfmuvl.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2bnB4Y3dqZmlkcmxxbGZtdXZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzODI3MTUsImV4cCI6MjA3OTk1ODcxNX0.9DQsgYHtU285oG2Twzr5mw71z4_5EiUDzry--bdf5lU";if(!a||!r)throw Error("Missing Supabase environment variables");let l=(0,s.eI)(a,r)},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var s=n(2972),a=n.n(s)},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[421,972,971,117,744],function(){return e(e.s=8091)}),_N_E=e.O()}]);