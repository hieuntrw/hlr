(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{4797:function(e,t,s){Promise.resolve().then(s.bind(s,8307))},8307:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),n=s(2265),l=s(9376),a=s(7648),i=s(9203);function c(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[c,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[x,h]=(0,n.useState)("");async function m(){let{data:{user:t}}=await i.O.auth.getUser();if(!t){e.push("/debug-login");return}let{data:s}=await i.O.from("profiles").select("role").eq("id",t.id).single();(null==s?void 0:s.role)!=="admin"&&e.push("/")}async function f(){o(!0);try{let{data:e,error:t}=await i.O.from("system_settings").select("key, value, description");if(t){console.error("Error:",t);return}s(e||[])}catch(e){console.error("Error:",e)}finally{o(!1)}}async function b(e){try{let{error:t}=await i.O.from("system_settings").update({value:x}).eq("key",e);if(t){console.error("Error:",t),alert("Lỗi khi lưu c\xe0i đặt");return}alert("Đ\xe3 lưu c\xe0i đặt!"),u(null),f()}catch(e){console.error("Error:",e),alert("C\xf3 lỗi xảy ra")}}return(0,n.useEffect)(()=>{m(),f()},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-6 px-4",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"⚙️ C\xe0i Đặt Hệ Thống"}),(0,r.jsx)(a.default,{href:"/admin",className:"text-blue-100 hover:text-white",children:"← Quay lại"})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["\uD83D\uDD10 ",(0,r.jsx)("strong",{children:"Super Admin Only:"})," Cấu h\xecnh c\xe1c gi\xe1 trị to\xe0n hệ thống"]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:c?(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Đang tải..."})}):t.length>0?(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"Kh\xf3a"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"M\xf4 Tả"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-700",children:"Gi\xe1 Trị"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-bold text-gray-700",children:"H\xe0nh Động"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-blue-600",children:e.key}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-700",children:e.description}),(0,r.jsx)("td",{className:"py-3 px-4",children:d===e.key?(0,r.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded px-2 py-1"}):(0,r.jsx)("span",{className:"font-bold text-gray-900",children:e.value})}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:d===e.key?(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsx)("button",{onClick:()=>b(e.key),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs font-semibold rounded transition-colors",children:"✓ Lưu"}),(0,r.jsx)("button",{onClick:()=>u(null),className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-xs font-semibold rounded transition-colors",children:"✕ Hủy"})]}):(0,r.jsx)("button",{onClick:()=>{u(e.key),h(e.value)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded transition-colors",children:"✏️ Sửa"})})]},e.key))})]}):(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng c\xf3 c\xe0i đặt n\xe0o"})})}),(0,r.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6 border-l-4 border-blue-500",children:[(0,r.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"\uD83D\uDCCC C\xe0i Đặt Hiện C\xf3"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"monthly_fund_fee:"})," Mức đ\xf3ng quỹ h\xe0ng th\xe1ng (VND)"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"challenge_fine_fee:"})," Mức phạt kh\xf4ng ho\xe0n th\xe0nh thử th\xe1ch (VND)"]})]})]})]})]})}},9203:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(7421);let n="https://jvnpxcwjfidrlqlfmuvl.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2bnB4Y3dqZmlkcmxxbGZtdXZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzODI3MTUsImV4cCI6MjA3OTk1ODcxNX0.9DQsgYHtU285oG2Twzr5mw71z4_5EiUDzry--bdf5lU";if(!n||!l)throw Error("Missing Supabase environment variables");let a=(0,r.eI)(n,l)},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var r=s(2972),n=s.n(r)},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[421,972,971,117,744],function(){return e(e.s=4797)}),_N_E=e.O()}]);