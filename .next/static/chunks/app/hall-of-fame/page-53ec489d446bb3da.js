(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{1549:function(e,t,l){Promise.resolve().then(l.bind(l,6413))},6413:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return m}});var s=l(7437),a=l(2265),r=l(9203);let n=[{id:"fm_male",label:"FM Nam",emoji:"\uD83C\uDFC3‍♂️"},{id:"fm_female",label:"FM Nữ",emoji:"\uD83C\uDFC3‍♀️"},{id:"hm_male",label:"HM Nam",emoji:"\uD83D\uDEB6‍♂️"},{id:"hm_female",label:"HM Nữ",emoji:"\uD83D\uDEB6‍♀️"}];function i(e){return"".concat(Math.floor(e/3600),":").concat(Math.floor(e%3600/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))}function d(e){let{data:t}=e;if(0===t.length)return(0,s.jsx)("div",{className:"text-center text-gray-500 py-12",children:"Chưa c\xf3 dữ liệu"});let l=t.length>=3?[t[1],t[0],t[2]]:t;return(0,s.jsx)("div",{className:"relative h-80 flex items-flex-end justify-center gap-4 mb-12",children:l.map((e,t)=>{let l=[2,1,3][t],a=["h-32","h-40","h-28"][t],r=["ring-2 ring-gray-400","ring-4 ring-yellow-400","ring-2 ring-orange-400"][t];return(0,s.jsxs)("div",{className:"flex flex-col items-center ".concat(1===t?"z-10":""),children:[(0,s.jsx)("div",{className:"text-5xl mb-2",children:function(e){switch(e){case 1:return"\uD83E\uDD47";case 2:return"\uD83E\uDD48";case 3:return"\uD83E\uDD49";default:return""}}(l)}),(0,s.jsx)("div",{className:"w-20 h-20 rounded-full ".concat(r," bg-gradient-to-br overflow-hidden mb-3 shadow-lg"),children:(0,s.jsx)("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-2xl font-bold text-white",children:e.full_name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"absolute top-0 text-lg font-bold px-3 py-1 rounded-full ".concat(1===l?"bg-yellow-100 text-yellow-800":2===l?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"),children:["#",l]}),(0,s.jsx)("div",{className:"w-24 ".concat(a," ").concat(1===l?"bg-gradient-to-t from-yellow-400 to-yellow-300 shadow-xl":2===l?"bg-gradient-to-t from-gray-300 to-gray-200 shadow-lg":"bg-gradient-to-t from-orange-400 to-orange-300 shadow-md"," rounded-t-lg flex flex-col items-center justify-end pb-3"),children:(0,s.jsx)("p",{className:"font-bold text-white text-sm text-center px-2",children:e.full_name})}),(0,s.jsxs)("div",{className:"mt-3 text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"PB"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900",children:i(0)})]})]},e.id)})})}function c(e){let{data:t}=e;return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow border-2 border-indigo-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsxs)("div",{className:"text-xl font-bold text-indigo-600 w-8",children:["#",t+4]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-300 flex items-center justify-center text-white font-bold text-lg",children:e.full_name.charAt(0).toUpperCase()})]}),(0,s.jsx)("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:e.full_name}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["PB: ",i(0)]})]},e.id))})}function o(e){let{data:t}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-4 bg-gray-100 font-semibold text-sm text-gray-700 border-b",children:[(0,s.jsx)("div",{className:"col-span-1",children:"Hạng"}),(0,s.jsx)("div",{className:"col-span-1",children:"Avatar"}),(0,s.jsx)("div",{className:"col-span-6",children:"T\xean"}),(0,s.jsx)("div",{className:"col-span-4",children:"PB"})]}),(0,s.jsx)("div",{className:"divide-y",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4 md:px-6 py-4 items-center hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"col-span-1 font-bold text-gray-900",children:["#",t+11]}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center text-white font-bold text-sm",children:e.full_name.charAt(0).toUpperCase()})}),(0,s.jsx)("div",{className:"col-span-6 md:col-span-6 font-medium text-gray-900",children:e.full_name}),(0,s.jsx)("div",{className:"col-span-4 md:col-span-4 text-sm text-gray-600",children:i(0)})]},e.id))})]})}function m(){let[e,t]=(0,a.useState)("fm_male"),[l,i]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0);async function h(){x(!0);try{let t,l,s;let{data:a,error:n}=await r.O.from("profiles").select("id, full_name, gender, pb_fm_seconds, pb_fm_approved, pb_hm_seconds, pb_hm_approved").not("gender","is",null);if(n){console.error("Error fetching profiles:",n),i([]);return}if(!a){i([]);return}"fm_male"===e?(t="pb_fm_seconds",l="pb_fm_approved",s="Male"):"fm_female"===e?(t="pb_fm_seconds",l="pb_fm_approved",s="Female"):"hm_male"===e?(t="pb_hm_seconds",l="pb_hm_approved",s="Male"):(t="pb_hm_seconds",l="pb_hm_approved",s="Female");let d=a.filter(e=>{let a=null!==e[t]&&void 0!==e[t]&&e[t]>0,r=!0===e[l],n=e.gender===s;return a&&r&&n}).sort((e,l)=>{let s=e[t]||1/0,a=l[t]||1/0;return s-a});i(d)}catch(e){console.error("Unexpected error:",e),i([])}finally{x(!1)}}(0,a.useEffect)(()=>{h()},[e]);let g=l.slice(0,3),u=l.slice(3,10),f=l.slice(10);return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"\uD83C\uDFC6 Bảng V\xe0ng"}),(0,s.jsx)("p",{className:"text-blue-100 text-lg",children:"Personal Best - Th\xe0nh t\xedch chạy marathon & nửa marathon"})]})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2",children:n.map(l=>(0,s.jsxs)("button",{onClick:()=>t(l.id),className:"px-6 py-3 rounded-lg font-semibold whitespace-nowrap transition-all ".concat(e===l.id?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border-2 border-transparent hover:border-blue-300"),children:[l.emoji," ",l.label]},l.id))}),m?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Đang tải dữ liệu..."})]})}):(0,s.jsxs)(s.Fragment,{children:[g.length>0&&(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\uD83E\uDD47 Top 3 - Bục Vinh Quang"}),(0,s.jsx)(d,{data:g})]}),u.length>0&&(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"⭐ Top 4-10"}),(0,s.jsx)(c,{data:u})]}),f.length>0&&(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\uD83D\uDCCB Danh S\xe1ch C\xf2n Lại"}),(0,s.jsx)(o,{data:f})]}),0===l.length&&(0,s.jsx)("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Chưa c\xf3 dữ liệu PB được duyệt cho danh mục n\xe0y"})})]})]})]})}},9203:function(e,t,l){"use strict";l.d(t,{O:function(){return n}});var s=l(7421);let a="https://jvnpxcwjfidrlqlfmuvl.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2bnB4Y3dqZmlkcmxxbGZtdXZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzODI3MTUsImV4cCI6MjA3OTk1ODcxNX0.9DQsgYHtU285oG2Twzr5mw71z4_5EiUDzry--bdf5lU";if(!a||!r)throw Error("Missing Supabase environment variables");let n=(0,s.eI)(a,r)}},function(e){e.O(0,[421,971,117,744],function(){return e(e.s=1549)}),_N_E=e.O()}]);